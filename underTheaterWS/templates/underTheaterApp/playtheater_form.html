{% extends "master.html" %}
{% block full_page_title %}Creacion de obra{% endblock %}
{% load static %}
{% block content %}
<div id="contenido">
    <h1>Creacion de obra</h1>
    <form enctype="multipart/form-data" method="post" id="create_play_form" novalidate>
        {% csrf_token %}
        <div class="row">
            <h2>Datos del la obra </h2>
        {{ form.non_field_errors }} 
            <div class="form-group">
                {{form.play_name.label_tag}}
                {{form.play_name}}
                <div class="help-block">{{form.play_name.help_text}}</div>
                {% if form.play_name.errors %}<div class="alert alert-danger">{{form.play_name.errors}}</div>{% endif %}
            </div>
            <div class="form-group">
                {{form.picture.label_tag}}
                {{form.picture}}
                <div class="help-block">{{form.picture.help_text}}</div>
                {% if form.picture.errors %}<div class="alert alert-danger">{{form.picture.errors}}</div>{% endif %}
            </div>
            <div class="form-group">
                {{form.synopsis.label_tag}}
                {{form.synopsis}}
                <div class="help-block">{{form.synopsis.help_text}}</div>
                {% if form.synopsis.errors %}<div class="alert alert-danger">{{form.synopsis.errors}}</div>{% endif %}
            </div>
            <div class="form-group">
                {{form.actors.label_tag}}
                {{form.actors}}
                <div class="help-block">{{form.actors.help_text}}</div>
                {% if form.actors.errors %}<div class="alert alert-danger">{{form.actors.errors}}</div>{% endif %}
            </div>
        </div>
        <div class="row">
            {% include "underTheaterApp/day_function_formset.html" with day_function_form=form.day_function %}
        </div>
        <div class="row">
            {% include "underTheaterApp/ticket_formset.html" with ticket_form=form.ticket %}
        </div>
        <div class="row">
            <div class="form-group">
                <button type="submit" class="btn btn-success"/> Guardar</button>
            </div> 
        </div>
</form> 
</div>
{% endblock %}
{% block main_scripts %}
<style type="text/css">
    .add-row {
        padding-left:18px;
        float:left;
        display:block;
        margin:5px 0 0 5px;
        width:100;
        height:16px;

    }
    .delete-row {
        padding-left:18px;
        float:right;
        display:block;
        margin:5px 0 0 5px;
        text-indent:-60px;
        width:16px;
        height:16px;
    }
</style>

<script type="text/javascript">
$("#id_actors").select2();
$("#id_hour").select2();
$("#id_periodic_date").select2();
$("#id_since").datepicker();
$("#id_until").datepicker();
$(".inline.{{ form.ticket.prefix }}").formset({
    prefix: "{{ form.ticket.prefix}}",
}); 
$("#select_datefunction").select2( {placeholder: "Select a  state", minimumResultsForSearch: -1, allowClear: false});
$("#select_datefunction").change(
        function(e){
        var date_option = $(this).val();
        $(".datetime_form .hour").removeClass("hidden");
        if (date_option =="only"){
            $(".datetime_form .since").removeClass("hidden");
            $(".datetime_form .until").addClass("hidden");
            $(".datetime_form .perdiodic_date").addClass("hidden");
            $("#id_periodic_date").select2("val", " ")
            $("#id_until").val("");
         }else{
            $(".datetime_form .since").removeClass("hidden");
            $(".datetime_form .until").removeClass("hidden");
            $(".datetime_form .perdiodic_date").removeClass("hidden");
         }
        
});


/*
$('.day_function_formset').formset(
        {addText: '', deleteText: '', 
         addCssClass: 'btn btn-success glyphicon glyphicon-plus text-aling-right',
         deleteCssClass: 'btn btn-danger glyphicon glyphicon-minus '}
);
*/
</script>
{% endblock %}
